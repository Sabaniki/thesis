\chapter{序論}
\label{chap:introduction}

\section{背景}
\label{section:background}
Service Function Chaining (SFC) は，Software Defined Network (SDN) および Network Function Virtualization (NFV) の文脈で研究されているトピックである~\cite{nfv,sfc-on-sdn-nfv-servey,sfc-on-sdn-scenario,imple-sfc-with-openflow}．
SFC では，ネットワーク機能 (NF) を通過する順序や NF のタイプに関する情報を事前に定義し，それらのルールをネットワーク機器に配布する必要がある．
SFC ネットワークを構築するネットワーク機器は，事前に決定されたルールに従って受信したパケットを NF に導く．
パケットを NF へ導くためのルールは，SDN コントローラやルーティングプロトコルによってネットワーク機器に配布される．
ネットワーク機器は IP ルーティング上の最短経路に関係なく，配布された SFC ルールに従ってパケットを転送する次のホップを選択する必要がある．
また，パケットのヘッダにこれらのルールに合致させるための特別な情報を埋め込む手法が取られることもある．
SFC は，クラウドサービスプロバイダ (CSP)，アプリケーションサービスプロバイダ (ASP) 及びインターネットサービスプロバイダ (ISP) にとって，現在の静的な環境に代わる柔軟かつ経済的な選択肢を提供する~\cite{survey-on-sfc}．

SFC を実現可能な技術には，いくつかの候補が存在する．
例えば OpenFlow~\cite{openflow}，Network Service Header (NSH)~\cite{rfc8300}，\fussy MPLS~\cite{rfc8595}などである．
これらの技術はどれも，最短経路に関係なく，ルールに基づいて受信したパケットを意図した NF に導く，という要件を満たすことができる．
OpenFlow では，経路情報を管理する中央のコントローラが，実際にパケットを転送する OpenFlow スイッチに対して明示的にパケット転送ルールを設定する．
OpenFlow スイッチは，コントローラによって適切に管理されたルールに従い，パケットを意図した NF に転送する．
OpenFlow のもつこのアーキテクチャは，従来のルーティングプロトコルに基づかない柔軟な経路制御を可能にする．
NSH は Service Path Identifier (SPI) とService Index (SI) によって NF を識別する．
NSH ノードは，パケットに付与された NSH 内の SPI，SI に基づいてパケットを転送する．
NSH は，サービスプレーンと呼ばれる専用のオーバーレイネットワークを作成し，そのオーバレイネットワーク内でサービスを転送する．
このオーバレイネットワークを構築する，というアーキテクチャにより，NSH では基礎となるネットワークトポロジを変更することなくサービス転送を可能にする．
一方，MPLS では，直接 NSH を使用する代わりに，MPLS ラベルスタックを利用する．
このラベルスタックには，パケットが通過すべきノードの順序がホップバイホップで含まれている．
ラベルスタック内で表現されるノードはルータだけでなく，NF も含まれるため，そのラベルスタックに基づいてパケットを転送する事で SFC を実現できる．
このアプローチもまた，基礎となるネットワークトポロジを変更せずに SFC を実現するために必要な，最短経路によらないパケット転送を達成する．

Segment Routing (SR)，特に Segment Routing over IPv6 (SRv6) もまた，SFCを実装するために使用される技術の1つである．
SR では，リンク，ノード，サービスといったネットワーク内の各エンティティを\textbf{セグメント}として表現する．
SRv6 パケットのヘッダ (SRH) には，セグメントリストと呼ばれる，そのパケットが通過すべきセグメントの順序を示したリストが含まれている．
SRv6 では，セグメントを識別するための ID (SID) として，IPv6 アドレスを使用する．
言い換えれば，SRv6 は IPv6 ルーティングインフラをその基盤として利用し，SRH 内で定義された順序に従って，任意のセグメントを経由してパケットを転送する．
SRv6 は，NF が実行されるノードをセグメントとして表現し，SID を割り当て，任意の順序で NF を通過するようにパケットを転送することで SFC を実現する．


\section{本論文の目的と構成}
本論文における以降の構成は次の通りである．
\ref*{chap:related_works}章では，サービスファンクションチェイニングに関する前提知識，及びそれを実現する技術について解説し，本論文の概要について述べる．
\ref*{chap:design_and_impl}章では，本論文の提案する新たな SRv6 End behavior である End.AN.NF についての詳細な動作，及び実装について述べる．
\ref*{chap:evaluation}章では，実装した End.AN.NF について，レイテンシ及びスループットの性能を特定のを変化させながら性能の計測する．
\ref*{chap:conclusion}章では，本研究における結論と今後の展望について述べ，End.AN.NF に必要なネットワーク制御プレーンについて検討する．